<h1>Listing customers</h1>

<div id='enabled_filter'>
  <%= label_tag 'filter' %>
  <%= select_tag 'filter', options_for_select([['Enabled', 'enabled'], ['Disabled', 'disabled']]), prompt: 'All' %><br>
</div>
<br />

<table class = 'table table-hover table-striped'>
  <tr>
    <th>
      Name
    </th>
    <th>
      Email
    </th>
    <th>
      Total Appointments
    </th>
    <th>
      Enabled
    </th>
    <th>
      Actions
    </th>
  </tr>
  <% @customers.each do |customer| %>
    <tr class="filter_row <%= customer.enabled ? 'enabled' : 'disabled' %>"> 
      <td>
        <%= customer.name %>
      </td>
      <td>
        <%= customer.email %>
      </td>
      <td>
        <%= customer.appointments.size %>
      </td>
      <td>
        <%= customer.enabled %>
      </td>
      <td>
        <%= link_to 'Show', admin_customer_path(customer.id) %>
        |
        <%= link_to 'Edit', edit_admin_customer_path(customer), method: :get %><br/>
      </td>
    </tr>
  <% end %>
</table>
<%= paginate @customers %>
<br />
<%= javascript_include_tag 'enabled_filter' %>
